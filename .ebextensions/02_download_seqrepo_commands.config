container_commands:
    00_delete_seqrepo:
        command: "rm -rf /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data/seqrepo"
        leader_only: true
        ignoreErrors: true

    01_export_eb_env_var:
        command: "export $(cat /opt/elasticbeanstalk/deployment/env | xargs)"
        leader_only: true

    02_install_awscli:
        command: "yum install -y awscli"
        leader_only: true

    03_install_unzip:
        command: "yum install -y unzip"
        leader_only: true

    04_s3_download:
        command: "aws s3 cp s3://${AWS_BUCKET_NAME}/${AWS_SEQREPO_OBJECT} /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data/seqrepo.zip --region us-east-2"
        leader_only: true

    05_unzip_seqrepo:
        command: "unzip /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data/seqrepo.zip -d /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data"
        leader_only: true

    06_seqrepo_permission:
        command: "chmod -R 777 /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data/seqrepo"
        leader_only: true

    07_macosx_permission:
        command: "chmod -R +wr /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data/__MACOSX"
        leader_only: true

    08_seqrepo_zip_permission:
        command: "chmod +wr /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data/seqrepo.zip"
        leader_only: true

    09_remove_macosx:
        command: "rm -R /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data/__MACOSX"
        leader_only: true

    10_remove_seqrepo_zip:
        command: "rm /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data/seqrepo.zip"
        leader_only: true

    11_data_permission:
        command: "chmod -R +wrx /var/app/venv/staging-LQM1lest/lib/python3.7/site-packages/variant/data"
        leader_only: true
